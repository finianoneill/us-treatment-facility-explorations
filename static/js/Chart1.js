var cities = [
  {
    "City": "ALAMEDA",
    "Number of facilities": 1,
    "Total Population": 61639,
    "Median Age": 39.4,
    "Average Household Income": 69076,
    "Poverty Count": 7125,
    "Per Capita Income": 38185
  },
  {
    "City": "ANTIOCH",
    "Number of facilities": 7,
    "Total Population": 396655,
    "Median Age": 33.857142857142854,
    "Average Household Income": 63659.857142857145,
    "Poverty Count": 64258,
    "Per Capita Income": 24125.14285714286
  },
  {
    "City": "BERKELEY",
    "Number of facilities": 8,
    "Total Population": 98406,
    "Median Age": 36.45,
    "Average Household Income": 67640.375,
    "Poverty Count": 13042,
    "Per Capita Income": 45328.875
  },
  {
    "City": "BURLINGAME",
    "Number of facilities": 13,
    "Total Population": 539240,
    "Median Age": 41.89999999999999,
    "Average Household Income": 109775,
    "Poverty Count": 32305,
    "Per Capita Income": 74474
  },
  {
    "City": "CAMPBELL",
    "Number of facilities": 4,
    "Total Population": 180748,
    "Median Age": 37.3,
    "Average Household Income": 87204,
    "Poverty Count": 13368,
    "Per Capita Income": 44023
  },
  {
    "City": "CONCORD",
    "Number of facilities": 12,
    "Total Population": 337401,
    "Median Age": 31.5,
    "Average Household Income": 47313,
    "Poverty Count": 67149,
    "Per Capita Income": 21096
  },
  {
    "City": "DALY CITY",
    "Number of facilities": 3,
    "Total Population": 184773,
    "Median Age": 39.6,
    "Average Household Income": 76978,
    "Poverty Count": 14694,
    "Per Capita Income": 30658
  },
  {
    "City": "DUBLIN",
    "Number of facilities": 1,
    "Total Population": 47384,
    "Median Age": 36.1,
    "Average Household Income": 114812,
    "Poverty Count": 1634,
    "Per Capita Income": 42534
  },
  {
    "City": "EMERYVILLE",
    "Number of facilities": 2,
    "Total Population": 52576,
    "Median Age": 36.4,
    "Average Household Income": 52787,
    "Poverty Count": 8614,
    "Per Capita Income": 36714
  },
  {
    "City": "FAIRFIELD",
    "Number of facilities": 4,
    "Total Population": 178747,
    "Median Age": 38,
    "Average Household Income": 83360.25,
    "Poverty Count": 18035,
    "Per Capita Income": 34560.5
  },
  {
    "City": "FREMONT",
    "Number of facilities": 33,
    "Total Population": 2087694,
    "Median Age": 35.28181818181818,
    "Average Household Income": 86137,
    "Poverty Count": 136449,
    "Per Capita Income": 34746.454545454544
  },
  {
    "City": "GILROY",
    "Number of facilities": 3,
    "Total Population": 174738,
    "Median Age": 33.4,
    "Average Household Income": 81037,
    "Poverty Count": 25113,
    "Per Capita Income": 29889
  },
  {
    "City": "HAYWARD",
    "Number of facilities": 9,
    "Total Population": 426121,
    "Median Age": 35.833333333333336,
    "Average Household Income": 64627.555555555555,
    "Poverty Count": 57442,
    "Per Capita Income": 26040.333333333332
  },
  {
    "City": "HERCULES",
    "Number of facilities": 1,
    "Total Population": 24454,
    "Median Age": 37.4,
    "Average Household Income": 97269,
    "Poverty Count": 1434,
    "Per Capita Income": 36802
  },
  {
    "City": "LARKSPUR",
    "Number of facilities": 2,
    "Total Population": 13774,
    "Median Age": 46.5,
    "Average Household Income": 97723,
    "Poverty Count": 424,
    "Per Capita Income": 78588
  },
  {
    "City": "LOS ALTOS",
    "Number of facilities": 2,
    "Total Population": 44698,
    "Median Age": 46.1,
    "Average Household Income": 167384,
    "Poverty Count": 978,
    "Per Capita Income": 85227
  },
  {
    "City": "LOS GATOS",
    "Number of facilities": 14,
    "Total Population": 323677,
    "Median Age": 44.57142857142856,
    "Average Household Income": 128457.64285714286,
    "Poverty Count": 12101,
    "Per Capita Income": 68584.85714285714
  },
  {
    "City": "MARTINEZ",
    "Number of facilities": 5,
    "Total Population": 240090,
    "Median Age": 42.5,
    "Average Household Income": 75672,
    "Poverty Count": 20745,
    "Per Capita Income": 36343
  },
  {
    "City": "MENLO PARK",
    "Number of facilities": 3,
    "Total Population": 121116,
    "Median Age": 39.2,
    "Average Household Income": 115444,
    "Poverty Count": 7836,
    "Per Capita Income": 69074
  },
  {
    "City": "MILLBRAE",
    "Number of facilities": 1,
    "Total Population": 21867,
    "Median Age": 45.4,
    "Average Household Income": 88451,
    "Poverty Count": 1234,
    "Per Capita Income": 42042
  },
  {
    "City": "MOUNTAIN VIEW",
    "Number of facilities": 35,
    "Total Population": 1096483,
    "Median Age": 35.71515151515153,
    "Average Household Income": 99155.30303030302,
    "Poverty Count": 94496,
    "Per Capita Income": 54704.545454545456
  },
  {
    "City": "NAPA",
    "Number of facilities": 6,
    "Total Population": 400944,
    "Median Age": 40.6,
    "Average Household Income": 72286,
    "Poverty Count": 42000,
    "Per Capita Income": 35746
  },
  {
    "City": "NEWARK",
    "Number of facilities": 1,
    "Total Population": 43139,
    "Median Age": 37.3,
    "Average Household Income": 85847,
    "Poverty Count": 3310,
    "Per Capita Income": 31056
  },
  {
    "City": "NOVATO",
    "Number of facilities": 6,
    "Total Population": 108642,
    "Median Age": 44.4,
    "Average Household Income": 83026,
    "Poverty Count": 6054,
    "Per Capita Income": 44454
  },
  {
    "City": "OAKLAND",
    "Number of facilities": 46,
    "Total Population": 1296272,
    "Median Age": 37.37826086956523,
    "Average Household Income": 62674.67391304348,
    "Poverty Count": 199155,
    "Per Capita Income": 42411.217391304344
  },
  {
    "City": "PALO ALTO",
    "Number of facilities": 18,
    "Total Population": 194576,
    "Median Age": 40.211111111111116,
    "Average Household Income": 114249.88888888889,
    "Poverty Count": 11824,
    "Per Capita Income": 90027.11111111111
  },
  {
    "City": "PETALUMA",
    "Number of facilities": 1,
    "Total Population": 36785,
    "Median Age": 40.7,
    "Average Household Income": 80645,
    "Poverty Count": 3037,
    "Per Capita Income": 33411
  },
  {
    "City": "PIEDMONT",
    "Number of facilities": 1,
    "Total Population": 29978,
    "Median Age": 38.8,
    "Average Household Income": 72848,
    "Poverty Count": 2369,
    "Per Capita Income": 57078
  },
  {
    "City": "PINOLE",
    "Number of facilities": 1,
    "Total Population": 18612,
    "Median Age": 42.8,
    "Average Household Income": 76960,
    "Poverty Count": 1738,
    "Per Capita Income": 34647
  },
  {
    "City": "PLEASANT HILL",
    "Number of facilities": 1,
    "Total Population": 33923,
    "Median Age": 42.3,
    "Average Household Income": 77485,
    "Poverty Count": 3051,
    "Per Capita Income": 43827
  },
  {
    "City": "PLEASANTON",
    "Number of facilities": 1,
    "Total Population": 30949,
    "Median Age": 38.5,
    "Average Household Income": 119849,
    "Poverty Count": 1559,
    "Per Capita Income": 49641
  },
  {
    "City": "REDWOOD CITY",
    "Number of facilities": 22,
    "Total Population": 650708,
    "Median Age": 37.67727272727272,
    "Average Household Income": 90166.95454545454,
    "Poverty Count": 79240,
    "Per Capita Income": 46973.045454545456
  },
  {
    "City": "RICHMOND",
    "Number of facilities": 5,
    "Total Population": 179635,
    "Median Age": 33.36,
    "Average Household Income": 45568.6,
    "Poverty Count": 39369,
    "Per Capita Income": 21980.4
  },
  {
    "City": "SAINT HELENA",
    "Number of facilities": 3,
    "Total Population": 28614,
    "Median Age": 47.29999999999999,
    "Average Household Income": 83551,
    "Poverty Count": 1668,
    "Per Capita Income": 53798
  },
  {
    "City": "SF (THE CITY)",
    "Number of facilities": 168,
    "Total Population": 5735728,
    "Median Age": 38.711875000000006,
    "Average Household Income": 82786.225,
    "Poverty Count": 776863,
    "Per Capita Income": 64700.68125
  },
  {
    "City": "SAN JOSE",
    "Number of facilities": 30,
    "Total Population": 1114384,
    "Median Age": 36.06666666666667,
    "Average Household Income": 72294.2,
    "Poverty Count": 150952,
    "Per Capita Income": 38940.933333333334
  },
  {
    "City": "SAN LEANDRO",
    "Number of facilities": 5,
    "Total Population": 196125,
    "Median Age": 34,
    "Average Household Income": 51518,
    "Poverty Count": 32765,
    "Per Capita Income": 23200
  },
  {
    "City": "SAN MATEO",
    "Number of facilities": 10,
    "Total Population": 362595,
    "Median Age": 37.85000000000001,
    "Average Household Income": 79840.8,
    "Poverty Count": 30905,
    "Per Capita Income": 39864.5
  },
  {
    "City": "SAN PABLO",
    "Number of facilities": 1,
    "Total Population": 59720,
    "Median Age": 33.7,
    "Average Household Income": 52976,
    "Poverty Count": 10159,
    "Per Capita Income": 22112
  },
  {
    "City": "SAN RAFAEL",
    "Number of facilities": 11,
    "Total Population": 334521,
    "Median Age": 46.399999999999984,
    "Average Household Income": 88646,
    "Poverty Count": 21241,
    "Per Capita Income": 48387
  },
  {
    "City": "SAN RAMON",
    "Number of facilities": 10,
    "Total Population": 349370,
    "Median Age": 39.60000000000001,
    "Average Household Income": 119623,
    "Poverty Count": 9610,
    "Per Capita Income": 49034
  },
  {
    "City": "SANTA CLARA",
    "Number of facilities": 8,
    "Total Population": 409121,
    "Median Age": 35.8625,
    "Average Household Income": 96394.75,
    "Poverty Count": 30131,
    "Per Capita Income": 42366.375
  },
  {
    "City": "SANTA ROSA",
    "Number of facilities": 22,
    "Total Population": 803766,
    "Median Age": 39.722727272727276,
    "Average Household Income": 64019.59090909091,
    "Poverty Count": 88681,
    "Per Capita Income": 32915.72727272727
  },
  {
    "City": "SEBASTOPOL",
    "Number of facilities": 1,
    "Total Population": 29381,
    "Median Age": 50.3,
    "Average Household Income": 68223,
    "Poverty Count": 2675,
    "Per Capita Income": 40149
  },
  {
    "City": "SONOMA",
    "Number of facilities": 5,
    "Total Population": 194000,
    "Median Age": 44.9,
    "Average Household Income": 58785,
    "Poverty Count": 23510,
    "Per Capita Income": 40040
  },
  {
    "City": "SOUTH SF",
    "Number of facilities": 2,
    "Total Population": 130400,
    "Median Age": 37.8,
    "Average Household Income": 77058,
    "Poverty Count": 9126,
    "Per Capita Income": 31603
  },
  {
    "City": "UNION CITY",
    "Number of facilities": 4,
    "Total Population": 282748,
    "Median Age": 36.5,
    "Average Household Income": 82083,
    "Poverty Count": 23620,
    "Per Capita Income": 29685
  },
  {
    "City": "VACAVILLE",
    "Number of facilities": 11,
    "Total Population": 664359,
    "Median Age": 38.07272727272727,
    "Average Household Income": 74650.09090909091,
    "Poverty Count": 54149,
    "Per Capita Income": 29522.81818181818
  },
  {
    "City": "VALLEJO",
    "Number of facilities": 8,
    "Total Population": 257609,
    "Median Age": 37.025,
    "Average Household Income": 50724.625,
    "Poverty Count": 52590,
    "Per Capita Income": 21690.875
  },
  {
    "City": "WALNUT CREEK",
    "Number of facilities": 24,
    "Total Population": 580779,
    "Median Age": 46.19583333333335,
    "Average Household Income": 105948.33333333333,
    "Poverty Count": 28393,
    "Per Capita Income": 54482.708333333336
  }
];

var names = [];
var numOfFacilities = ['Number of Facilities'];
var totalPop = ['Total Population'];
var medianAge = ['Median Age'];
var avgHouseholdIncome = ['Average Household Income'];
var povertyCount = ['Poverty Count'];
var perCapitaIncome = ['Per Capita Income'];

var popPerFacility = ['Population per facility'];
var povertyRate = ['Poverty rate per capita'];
// Iterate through each city object
cities.forEach((city) => {
  // Iterate through each key and value
  Object.entries(city).forEach(([key,value]) => {
  // Use the key to determine which array to push the value to
  if (key==="City"){
    names.push(value);
  }
  else if (key==="Number of facilities"){
    numOfFacilities.push(value);
  }
  else if (key==="Total Population"){
    totalPop.push(value);
  }
  else if (key==="Median Age"){
    medianAge.push(value);
  }
  else if (key==="Average Household Income"){
    avgHouseholdIncome.push(value);
  }
  else if (key==="Poverty Count"){
    povertyCount.push(value);
  }
  else{
    perCapitaIncome.push(value);
  }
  });
});

for (i=1; i <numOfFacilities.length; i++){
  popPerFacility.push(totalPop[i]/numOfFacilities[i]);
  povertyRate.push(povertyCount[i]/totalPop[i]);
}



var chart = c3.generate({
    bindto: '#chart',
    data: {
      columns: [
       numOfFacilities, totalPop, popPerFacility, medianAge, avgHouseholdIncome, povertyCount, perCapitaIncome,
      ],
      type: 'bar',
      height: 800
    },
    axis: {
      x: {
        type: 'category',
        categories: names,
        tick: {
          rotate: 90
        },
        height: 100
      }
    },
    legend: {
      position: 'inset'
    }
});

d3.select("svg").append("text")
    .attr("x", 600 )
    .attr("y", 50)
    .style("font-size", "35px")
    .style("text-anchor", "middle")
    .text("City Hospital Attributes");